<app-header type="welcome"></app-header>
<div class="container-fluid mycontainer">
  <div class="row justify-content-xl-center justify-content-md-center justify-content-center">
    <div class="col-xl-4 col-md-6 col-10">
      <div class="card mx-auto">
        <div class="card-header"><strong>Register</strong></div>
        <div class="card-body">
          <form name="form-login">
            <div *ngIf="errors" class="form-group">
              <div *ngFor="let error of errors" class="alert alert-danger" role="alert">{{ error }}</div>
            </div>
            <div class="form-group">
              <label for="type">Type of user</label>
              <select class="form-control" [(ngModel)]='type' name='type' (change)="createUser()">
                <option *ngFor="let t of types" value="{{ t.type }}">{{ t.name }}</option>
              </select>
            </div>
            <!-- General fields -->
            <div *ngIf="type">
              <div class="form-group">
                <label for="username">Username</label>
                <input class="form-control" type="text" [(ngModel)]="user.username" name="username" placeholder="Enter your username" autofocus>
              </div>
              <div class="form-group">
                <label for="password">Password</label>
                <input class="form-control" type="password" [(ngModel)]="user.password" name="password" placeholder="Enter your password">
              </div>
            </div>
            <!-- Student-only fields -->
            <div *ngIf="type == 'student'">
              <div class="form-group">
                <label for="firstname">First name</label>
                <input class="form-control" type="text" [(ngModel)]="user.firstname" name="firstname" placeholder="Enter your first name">
              </div>
              <div class="form-group">
                <label for="lastname">Last name</label>
                <input class="form-control" type="text" [(ngModel)]="user.lastname" name="lastname" placeholder="Enter your last name">
              </div>
              <div class="form-group">
                <label for="phone">Phone</label>
                <input class="form-control" type="text" [(ngModel)]="user.phone" name="phone" placeholder="Enter your phone">
              </div>
              <div class="form-group">
                <label for="mail">E-mail</label>
                <input class="form-control" type="email" [(ngModel)]="user.mail" name="mail" placeholder="Enter your e-mail">
              </div>
              <div class="form-group">
                <label for="type">Year of studies</label>
                <select class="form-control" [(ngModel)]='user.year' name='year'>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                </select>
              </div>
              <div class="form-group">
                <label for="graduated">Graduated from college?</label>
                <div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" [(ngModel)]="user.graduated" name="graduated" [value]="true">
                    <label class="form-check-label" for="graduated">Yes</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" [(ngModel)]="user.graduated" name="graduated" [value]="false">
                    <label class="form-check-label" for="graduated">No</label>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="profile">Profile photo</label>
                <input class="form-control-file" type="file" [(ngModel)]="user.profile" name="profile" (change)="selectImage($event)">
              </div>
            </div>
            <!-- Company-only fields -->
            <div *ngIf="type == 'company'">
              <div class="form-group">
                <label for="name">Company name</label>
                <input class="form-control" type="text" [(ngModel)]="user.name" name="name" placeholder="Enter company name">
              </div>
              <div class="form-group">
                <label for="city">City</label>
                <input class="form-control" type="text" [(ngModel)]="user.city" name="city" placeholder="Enter city">
              </div>
              <div class="form-group">
                <label for="address">Address</label>
                <input class="form-control" type="text" [(ngModel)]="user.address" name="address" placeholder="Enter address">
              </div>
              <div class="form-group">
                <label for="executive">Executive</label>
                <input class="form-control" type="text" [(ngModel)]="user.executive" name="executive" placeholder="Enter executive">
              </div>
              <div class="form-group">
                <label for="taxid">Tax ID</label>
                <input class="form-control" type="text" [(ngModel)]="user.taxid" name="taxid" placeholder="Enter tax ID">
              </div>
              <div class="form-group">
                <label for="employees">Number of employees</label>
                <input class="form-control" type="text" [(ngModel)]="user.employees" name="employees" placeholder="Enter number of employees">
              </div>
              <div class="form-group">
                <label for="mail">E-mail</label>
                <input class="form-control" type="email" [(ngModel)]="user.mail" name="mail" placeholder="Enter e-mail">
              </div>
              <div class="form-group">
                <label for="employees">Web site</label>
                <input class="form-control" type="text" [(ngModel)]="user.site" name="site" placeholder="Enter web site">
              </div>
              <div class="form-group">
                <label for="field">Field</label>
                <select class="form-control" [(ngModel)]='user.field' name='field'>
                  <option *ngFor="let f of fields" value="{{ f.name }}">{{ f.name }}</option>
                </select>
              </div>
              <div class="form-group">
                <label for="specialty">Specialty</label>
                <input class="form-control" type="text" [(ngModel)]="user.specialty" name="specialty" placeholder="Enter specialty">
              </div>
              <div class="form-group">
                <label for="logo">Logo</label>
                <input class="form-control-file" type="file" [(ngModel)]="user.logo" name="logo"  (change)="selectImage($event)>
              </div>
            </div>
            <!-- General register button -->
            <button class="btn btn-primary btn-block" (click)="register()" [disabled]="!type">Register</button>
          </form>
          <div class="text-center">
            <a class="d-block mt-3" routerLink="/register">Reset your password</a>
            <a class="d-block" routerLink="/login">Back to login</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<app-footer></app-footer>